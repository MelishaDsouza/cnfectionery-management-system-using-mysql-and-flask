<!DOCTYPE html>
<html>
<head>
    <title>Add Cake Order</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>Add New Cake Order</h1>
    <div class="form-container">
     <!-- <form action="/add-order" method="POST">
        <label>Customer Name:</label><br>
        <input type="text" name="customer_name" required><br><br>
        
        
        <label>Cake Type:</label><br>
        <input type="text" name="cake_type" required><br><br>

        <label>Quantity:</label><br>
        <input type="number" name="quantity" id="qty" required><br><br>

        <label>Price per Item:</label><br>
        <input type="number" step="0.01" name="price_per_item" id="price" required><br><br>
        <span id="total">0.00</span><br> -->
        <!-- <div class="total">Total Bill: ₹<span id="total">0.00</span></div><br>
        
        <button type="button" onclick="addItem()">+ Add Item</button><br><br>
        <button type="submit">Place Order</button>
       </form> -->
       <form action="/add-order" method="POST">
        <label>Customer Name:</label><br>
        <input type="text" name="customer_name" required><br><br>
    
        <div id="order-items">
            <div class="order-item">
                <label>Cake Type:</label><br>
                <input type="text" name="cake_type[]" required><br>
    
                <label>Quantity:</label><br>
                <input type="number" name="quantity[]" class="qty" required><br>
    
                <label>Price per Item:</label><br>
                <input type="number" name="price_per_item[]" step="0.01" class="price" required><br>
    
                <div>Item Total: ₹<span class="item-total">0.00</span></div><br><hr>
            </div>
        </div>
    
        <div class="total">Grand Total: ₹<span id="grand-total">0.00</span></div><br>
    
        <button type="button" onclick="addItem()">+ Add Item</button><br><br>
        <button type="submit">Place Order</button>
    </form>
    

    </div>
    <br><br>
    <a href="/orders">View All Orders</a>
    
   
    <script>
        function addItem() {
            const container = document.getElementById('order-items');
            const original = container.querySelector('.order-item');
            const clone = original.cloneNode(true);
    
            // Reset values
            clone.querySelectorAll('input').forEach(input => input.value = '');
            clone.querySelector('.item-total').textContent = '0.00';
    
            container.appendChild(clone);
        }
    
        function updateTotals() {
            const items = document.querySelectorAll('.order-item');
            let grandTotal = 0;
    
            items.forEach(item => {
                const qty = parseFloat(item.querySelector('.qty').value) || 0;
                const price = parseFloat(item.querySelector('.price').value) || 0;
                const total = qty * price;
                item.querySelector('.item-total').textContent = total.toFixed(2);
                grandTotal += total;
            });
    
            document.getElementById('grand-total').textContent = grandTotal.toFixed(2);
        }
    
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('order-items').addEventListener('input', updateTotals);
            updateTotals();
        });
    </script>
    
 
        
        <!-- // document.addEventListener('DOMContentLoaded', function () {
            

        //     const qtyInput = document.getElementById('qty');
        //     const priceInput = document.getElementById('price');
        //     const totalDisplay = document.getElementById('total');
        
        //     function updateTotal() {
        //         const qty = parseFloat(qtyInput.value) || 0;
        //         const price = parseFloat(priceInput.value) || 0;
        //         const total = qty * price;
        //         totalDisplay.textContent = total.toFixed(2);
        //     }
        
        //     qtyInput.addEventListener('input', updateTotal);
        //     priceInput.addEventListener('input', updateTotal);
        //     updateTotal();
            
        // });    
        //  -->
        

</body>
</html>
